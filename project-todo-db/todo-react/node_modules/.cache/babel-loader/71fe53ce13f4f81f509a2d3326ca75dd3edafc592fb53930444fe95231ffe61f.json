{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\any78\\\\Desktop\\\\repo\\\\react\\\\project-todo-db\\\\todo-react\\\\src\\\\componenet\\\\Todos.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect, useReducer, useRef, useState } from \"react\";\nimport TodoCreate from \"./TodoCreate\";\nimport TodoList from \"./TodoList\";\nimport axios from \"axios\";\nimport { Outlet } from \"react-router-dom\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"create\":\n      return [...state, {\n        id: action.id,\n        text: action.text,\n        done: false\n      }];\n    case \"remove\":\n      return state.filter(todo => todo.id !== action.id);\n    case \"toggle\":\n      return state.map(todo => todo.id === action.id ? {\n        ...todo,\n        done: !todo.done\n      } : todo);\n    default:\n      return state;\n  }\n}\nconst Data = () => {\n  _s();\n  const [posts, setPosts] = useState({\n    isLoading: true,\n    data: null,\n    isError: false\n  });\n  const fetchData = async () => {\n    const {\n      data\n    } = await axios.get(\"http://localhost:5000/posts\");\n    setPosts({\n      isLoading: false,\n      data,\n      isError: false\n    });\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  console.log(\"데이터: \");\n  console.log(posts.data);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n_s(Data, \"ZrWFgEs/uBNoXXjExAhdcsM87SI=\");\n_c = Data;\nconst initialState = [{\n  id: 99,\n  text: \"json-text1\",\n  done: true\n}, {\n  id: 98,\n  text: \"json-text2\",\n  done: false\n}, {\n  id: 97,\n  text: \"json-text3\",\n  done: false\n}];\nfunction Todos() {\n  _s2();\n  // json server start\n  const [posts, setPosts] = useState({\n    isLoading: true,\n    data: null,\n    isError: false\n  });\n  const fetchData = async () => {\n    const {\n      data\n    } = await axios.get(\"http://localhost:5000/posts\");\n    setPosts({\n      isLoading: false,\n      data,\n      isError: false\n    });\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  // json server end\n\n  var temp = posts.data;\n  console.log(temp);\n  // text\n  // console.log(initialState);\n  // const [todos, dispatch] = useReducer(reducer, initialState);\n  const [todos, dispatch] = useReducer(reducer, temp);\n  const [text, setText] = useState(\"\");\n  const handleText = e => setText(e.target.value);\n  const nextId = useRef(4);\n\n  // 추가\n  // const handleSubmit = (e) => {\n  //   e.preventDefault();\n  //   dispatch({ type: \"create\", id: nextId.current++, text });\n  // };\n\n  // const handleSubmit = async () => {\n  //   const { data } = await axios.post(\"http://localhost:5000/posts\", inputs);\n  //   navigate(\"/post/\", data.id);\n  // };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const newTodo = {\n      id: nextId.current,\n      text,\n      done: false\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:5000/posts\", newTodo);\n    dispatch({\n      type: \"create\",\n      id: data.id,\n      text: data.text\n    });\n    nextId.current += 1;\n    setText(\"\"); // 입력창 초기화\n  };\n\n  // 삭제\n  function handleRemove(id) {\n    if (window.confirm(\"delete ok?\")) dispatch({\n      type: \"remove\",\n      id\n    });\n  }\n\n  // 토글(밑줄)\n  const handleToggle = id => dispatch({\n    type: \"toggle\",\n    id\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Data, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TodoList, {\n      todos: todos,\n      onRemove: handleRemove,\n      onToggle: handleToggle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TodoCreate, {\n      onChange: handleText,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {\n      context: {\n        posts\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s2(Todos, \"3IvJEjATvtMReKwszs01B3ZhOQY=\");\n_c2 = Todos;\nexport default Todos;\nvar _c, _c2;\n$RefreshReg$(_c, \"Data\");\n$RefreshReg$(_c2, \"Todos\");","map":{"version":3,"names":["useEffect","useReducer","useRef","useState","TodoCreate","TodoList","axios","Outlet","reducer","state","action","type","id","text","done","filter","todo","map","Data","posts","setPosts","isLoading","data","isError","fetchData","get","console","log","initialState","Todos","temp","todos","dispatch","setText","handleText","e","target","value","nextId","handleSubmit","preventDefault","newTodo","current","post","handleRemove","window","confirm","handleToggle"],"sources":["C:/Users/any78/Desktop/repo/react/project-todo-db/todo-react/src/componenet/Todos.jsx"],"sourcesContent":["import { useEffect, useReducer, useRef, useState } from \"react\";\r\nimport TodoCreate from \"./TodoCreate\";\r\nimport TodoList from \"./TodoList\";\r\nimport axios from \"axios\";\r\nimport { Outlet } from \"react-router-dom\";\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"create\":\r\n      return [...state, { id: action.id, text: action.text, done: false }];\r\n    case \"remove\":\r\n      return state.filter((todo) => todo.id !== action.id);\r\n    case \"toggle\":\r\n      return state.map((todo) =>\r\n        todo.id === action.id ? { ...todo, done: !todo.done } : todo\r\n      );\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst Data = () => {\r\n  const [posts, setPosts] = useState({\r\n    isLoading: true,\r\n    data: null,\r\n    isError: false,\r\n  });\r\n  const fetchData = async () => {\r\n    const { data } = await axios.get(\"http://localhost:5000/posts\");\r\n    setPosts({\r\n      isLoading: false,\r\n      data,\r\n      isError: false,\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n  console.log(\"데이터: \");\r\n  console.log(posts.data);\r\n  return <></>;\r\n};\r\n\r\nconst initialState = [\r\n  { id: 99, text: \"json-text1\", done: true },\r\n  { id: 98, text: \"json-text2\", done: false },\r\n  { id: 97, text: \"json-text3\", done: false },\r\n];\r\n\r\nfunction Todos() {\r\n  // json server start\r\n  const [posts, setPosts] = useState({\r\n    isLoading: true,\r\n    data: null,\r\n    isError: false,\r\n  });\r\n  const fetchData = async () => {\r\n    const { data } = await axios.get(\"http://localhost:5000/posts\");\r\n    setPosts({\r\n      isLoading: false,\r\n      data,\r\n      isError: false,\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n  // json server end\r\n\r\n  var temp = posts.data;\r\n  console.log(temp);\r\n  // text\r\n  // console.log(initialState);\r\n  // const [todos, dispatch] = useReducer(reducer, initialState);\r\n  const [todos, dispatch] = useReducer(reducer, temp);\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const handleText = (e) => setText(e.target.value);\r\n  const nextId = useRef(4);\r\n\r\n  // 추가\r\n  // const handleSubmit = (e) => {\r\n  //   e.preventDefault();\r\n  //   dispatch({ type: \"create\", id: nextId.current++, text });\r\n  // };\r\n\r\n  // const handleSubmit = async () => {\r\n  //   const { data } = await axios.post(\"http://localhost:5000/posts\", inputs);\r\n  //   navigate(\"/post/\", data.id);\r\n  // };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newTodo = { id: nextId.current, text, done: false };\r\n    const { data } = await axios.post(\"http://localhost:5000/posts\", newTodo);\r\n    dispatch({ type: \"create\", id: data.id, text: data.text })\r\n    nextId.current += 1;\r\n    setText(\"\"); // 입력창 초기화\r\n  };\r\n\r\n\r\n  // 삭제\r\n  function handleRemove(id) {\r\n    if (window.confirm(\"delete ok?\")) dispatch({ type: \"remove\", id });\r\n  }\r\n\r\n  // 토글(밑줄)\r\n  const handleToggle = (id) => dispatch({ type: \"toggle\", id });\r\n\r\n  return (\r\n    <div>\r\n      <Data />\r\n      <TodoList todos={todos} onRemove={handleRemove} onToggle={handleToggle} />\r\n      <TodoCreate onChange={handleText} onSubmit={handleSubmit} />\r\n      <Outlet context={{ posts }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Todos;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}